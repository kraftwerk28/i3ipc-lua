#!/bin/bash
if [[ $# -eq 0 || $1 =~ ^(--help|-h)$ ]]; then
	echo "Usage: $0 <command> [arg]..."
	exit
fi
if [[ -z $I3IPC_CMD_SOCK ]]; then
	I3IPC_CMD_SOCK="${XDG_RUNTIME_DIR:-"/tmp"}/lua-i3ipc.sock"
fi
if [[ ! -S $I3IPC_CMD_SOCK ]]; then
	echo \
		'IPC Socket does not exist.' \
		'Did you forget to pass `cmd = true` in `Connection` constructor' >&2
	exit 1
fi
IFS=$'\n'
echo "$*" | socat - "unix-connect:${I3IPC_CMD_SOCK}"
