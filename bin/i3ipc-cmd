#!/bin/bash
if [[ $# -eq 0 || $1 =~ ^(--help|-h)$ ]]; then
	echo "Usage: $0 <command> [arg]..."
	exit
fi
if [[ -z $SOCKPATH ]]; then
	SOCKPATH="${XDG_RUNTIME_DIR:-"/tmp"}/lua-i3ipc.sock"
fi
if [[ ! -S $SOCKPATH ]]; then
	echo \
		'IPC Socket does not exist.' \
		'Did you forget to pass `cmd = true` in `Connection` constructor' >&2
	exit 1
fi
echo "$@" | exec socat - "unix-connect:${SOCKPATH}"
